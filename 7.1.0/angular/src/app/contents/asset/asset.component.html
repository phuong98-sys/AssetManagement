<div class="header-title">
    <div class="title-page">Sổ tài sản</div>
    <div class="btn-add-container">
        <button class="btn btn-add" (click)="createOrEditAsset()">Thêm</button>
    </div>
</div>
<form class="kt-form" autocomplete="off">
    <div class="row align-items-center">
        <div class="col-xl-12">
            <div class="form-group m-form__group align-items-center">
                <div class="input-group">
                    <input [(ngModel)]="filterText" name="filterText" autoFocus
                        class="form-control m-input"
                        placeholder="Tìm kiếm theo mã tài sản, tên tài sản, người tạo" type="text" />
                    <span class="input-group-btn">
                        <button (click)="getAssets()" class="btn btn-search" type="submit">
                            <i class="fa fa-search"></i>
                        </button>
                    </span>
                </div>
            </div>
        </div>
    </div>
    <div class="row" [hidden]="!advancedFiltersAreShown">
        <div class="col-md-12">
            <div class="kt-separator kt-separator--border-dashed"></div>
        </div>

        <div class="col-md-4">
            <div class="form-group">
                <label for="MinDateFilter">Tìm kiếm theo ngày tạo</label>
                <div class="input-group">
                    <input class="form-control m-input" id="MinDateFilter"
                        name="MinDateFilter" type="datetime" bsDatepicker
                        placeholder="From" [(ngModel)]="minDateFilter"
                        [bsConfig]="{ customTodayClass: 'custom-today-class' }" />
                    <span style="
                            line-height: 40px;
                            padding: 0 15px 0 15px;
                        ">
                        &mdash;
                    </span>
                    <input class="form-control m-input" id="MaxDateFilter"
                        name="MaxDateFilter" type="datetime" bsDatepicker placeholder="To"
                        [(ngModel)]="maxDateFilter"
                        [bsConfig]="{ customTodayClass: 'custom-today-class' }" />
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="form-group">
                <label for="TypeFilter">{{l("Loại tài sản")}}</label>
                <p-dropdown id="TypeFilter" #assetType="ngModel"
                    name="TypeFilter" [options]="assetTypeList"
                    [(ngModel)]="selectedAssetType" placeholder="{{ l('Chọn Loại tài sản') }}"
                    optionLabel="name" styleClass="form-control filter-dropdown"></p-dropdown>
            </div>
        </div>
        <div class="col-md-2">
            <div class="form-group">
                <label for="StatusFilter">{{l("Trạng thái sử dụng")}}</label>
                <p-dropdown id="StatusFilter" #assetStatus="ngModel"
                    name="StatusFilter" [options]="assetTypeList"
                    [(ngModel)]="selectedAssetStatus" placeholder="{{ l('Chọn trạng thái ') }}"
                    optionLabel="name" styleClass="form-control filter-dropdown"></p-dropdown>
            </div>
        </div>
        <div class="col-md-2">
            <div class="form-group">
                <label for="TypeFilter">{{l("Lí do ghi giảm")}}</label>
                <p-dropdown id="ypeFilter" #assetType="ngModel"
                    name="TypeFilter" [options]="assetTypeList"
                    [(ngModel)]="selectedReasonReduce" placeholder="{{ l('Chọn Loại tài sản') }}"
                    optionLabel="name" styleClass="form-control filter-dropdown"></p-dropdown>
            </div>
        </div>
        <div class="col-md-4">
            <div class="form-group">
                <label for="MinDateFilter">Tìm kiếm theo ngày ghi tăng</label>
                <div class="input-group">
                    <input class="form-control m-input" id="MinDateFilter"
                        name="MinDateFilter" type="datetime" bsDatepicker
                        placeholder="From" [(ngModel)]="minDateFilter"
                        [bsConfig]="{ customTodayClass: 'custom-today-class' }" />
                    <span style="
                            line-height: 40px;
                            padding: 0 15px 0 15px;
                        ">
                        &mdash;
                    </span>
                    <input class="form-control m-input" id="MaxDateFilter"
                        name="MaxDateFilter" type="datetime" bsDatepicker placeholder="To"
                        [(ngModel)]="maxDateFilter"
                        [bsConfig]="{ customTodayClass: 'custom-today-class' }" />
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="form-group">
                <label for="MinDateFilter">Tìm kiếm theo ngày ghi giảm</label>
                <div class="input-group">
                    <input class="form-control m-input" id="MinDateFilter"
                        name="MinDateFilter" type="datetime" bsDatepicker
                        placeholder="From" [(ngModel)]="minDateFilter"
                        [bsConfig]="{ customTodayClass: 'custom-today-class' }" />
                    <span style="
                            line-height: 40px;
                            padding: 0 15px 0 15px;
                        ">
                        &mdash;
                    </span>
                    <input class="form-control m-input" id="MaxDateFilter"
                        name="MaxDateFilter" type="datetime" bsDatepicker placeholder="To"
                        [(ngModel)]="maxDateFilter"
                        [bsConfig]="{ customTodayClass: 'custom-today-class' }" />
                </div>
            </div>
        </div>
        <!-- <div class="col-md-2">
            <div class="form-group">
                <label for="titleFilter">Tên tà</label>
                <input type="text" class="form-control" id="titleFilter"
                    name="titleFilter" [(ngModel)]="titleFilter" />
            </div>
        </div>
        <div class="col-md-2">
            <div class="form-group">
                <label for="descriptionFilter">Description</label>
                <input type="text" class="form-control" id="descriptionFilter"
                    name="descriptionFilter" [(ngModel)]="descriptionFilter" />
            </div>
        </div>
        <div class="col-md-2">
            <div class="form-group">
                <label for="authorFilter">Author</label>
                <input type="text" class="form-control" id="authorFilter"
                    name="authorFilter" [(ngModel)]="authorFilter" />
            </div>
        </div> -->
        <div class="col-md-1">
            <div class="form-group">
                <label class="form-label-no-content" style="height: 1rem; width: 100%;"></label>
                <button class="btn btn-primary form-control" (click)="getAssets()" type="submit" style="width: 100px;">
                    <svg xmlns="http://www.w3.org/2000/svg" [style]="{'min-width':'15px'}" width="17.592" height="16" viewBox="0 0 17.592 16">
                        <g id="filter-tool" transform="translate(0.601 1)">
                          <path id="Path" d="M15.1.308A.583.583,0,0,0,14.583,0h-14A.583.583,0,0,0,.1.907L5.25,7.76v5.657A.583.583,0,0,0,5.833,14h3.5a.583.583,0,0,0,.583-.583V7.76L15.554.6C15.673.42,15.2.5,15.1.308Z" transform="translate(0.417 0)" fill="none" stroke="#ffffff" stroke-miterlimit="10" stroke-width="2"/>
                        </g>
                    </svg>
                    Áp dụng</button>
            </div>
        </div>
    </div>
    <div class="row mb-2">
        <div class="col-sm-12">
            <span class="clickable-item text-muted" *ngIf="!advancedFiltersAreShown" (click)="
                    advancedFiltersAreShown = !advancedFiltersAreShown
                "><i class="fa fa-angle-down"></i>
                {{ l("Hiện bộ lọc nâng cao") }}</span>
            <span class="clickable-item text-muted" *ngIf="advancedFiltersAreShown" (click)="
                    advancedFiltersAreShown = !advancedFiltersAreShown
                "><i class="fa fa-angle-up"></i>
                {{ l("Ẩn bộ lọc nâng cao") }}</span>
        </div>
    </div>
</form>
<!-- <div class="card-header">
    <div class="row">
        <div class="col-md-6">&emsp;</div>
        <div class="col-md-6">
            <div class="input-group">
                <div class="input-group-prepend">
                    <button
                            type="button"
                            class="btn bg-blue"
                            (click)="getDataPage(1)"
                    >
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                <input
                        type="text"
                        class="form-control"
                        name="keyword"
                        [placeholder]="'SearchWithThreeDot' | localize"
                        [(ngModel)]="keyword"
                        (keyup.enter)="getDataPage(1)"
                />
                <div class="input-group-append">
                    <button
                            type="button"
                            class="btn btn-default"
                            (click)="advancedFiltersVisible = !advancedFiltersVisible"
                    >
                        <i
                                class="fas"
                                [class.fa-angle-up]="advancedFiltersVisible"
                                [class.fa-angle-down]="!advancedFiltersVisible"
                        ></i>
                    </button>
                </div>
            </div>
        </div>
    </div> -->
    <!-- <div *ngIf="advancedFiltersVisible" class="card mb-0 mt-1">
        <div class="card-body">
            <form class="form-horizontal">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group row mb-0">
                            <label class="col-md-3 col-form-label">
                                {{ "IsActive" | localize }}
                            </label>
                            <div class="col-md-9 pt-2">
                                <div class="custom-control custom-radio d-inline">
                                    <input
                                            type="radio"
                                            class="custom-control-input"
                                            id="isActiveAll"
                                            name="isActive"
                                            [(ngModel)]="isActive"
                                            [value]="undefined"
                                            checked
                                    />
                                    <label class="custom-control-label" for="isActiveAll">
                                        {{ "All" | localize }}
                                    </label>
                                </div>
                                <div class="custom-control custom-radio d-inline mx-3">
                                    <input
                                            type="radio"
                                            class="custom-control-input"
                                            id="isActiveActive"
                                            name="isActive"
                                            [(ngModel)]="isActive"
                                            [value]="true"
                                    />
                                    <label
                                            class="custom-control-label"
                                            for="isActiveActive"
                                    >
                                        {{ "Yes" | localize }}
                                    </label>
                                </div>
                                <div class="custom-control custom-radio d-inline">
                                    <input
                                            type="radio"
                                            class="custom-control-input"
                                            id="isActivePassive"
                                            name="isActive"
                                            [(ngModel)]="isActive"
                                            [value]="false"
                                    />
                                    <label
                                            class="custom-control-label"
                                            for="isActivePassive"
                                    >
                                        {{ "No" | localize }}
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="card-footer">
            <button
                    type="button"
                    class="btn bg-blue"
                    (click)="getDataPage(1)"
            >
                {{ "Search" | localize }}
            </button>
            <button
                    type="button"
                    class="btn btn-default float-right"
                    (click)="clearFilters()"
            >
                {{ "Clear" | localize }}
            </button>
        </div>
    </div>
</div> -->
<div class="content-component">
    <p-table (onLazyLoad)="getAssets($event)" [paginator]="false" [lazy]="true" [rows]="3" [totalRecords]="totalRecords"  [scrollable]="true" scrollHeight="320px" scrollWidth="1100px" [value]="assetList" [resizableColumns]="true" [autoLayout]="true" [responsive]="primengTableHelper.isResponsive">
    <ng-template pTemplate="header">
        <tr>
            <th pResizableColumn pSortableColumn="assetCode" style="width:150px">
                Chức năng
            </th>
            <th pResizableColumn pSortableColumn="assetCode" style="width:120px">
                Mã tài sản
                <p-sortIcon field="assetCode"></p-sortIcon>
            </th>
            <th pResizableColumn pSortableColumn="assetTypeName" style="width:120px">
                Loại tài sản
                <p-sortIcon field="assetTypeName"></p-sortIcon>
            </th>
            <th pResizableColumn pSortableColumn="assetName" style="width:120px">
                Tên tài sản
                <p-sortIcon field="assetName"></p-sortIcon>
            </th>
            <th pResizableColumn pSortableColumn="orginalPrice" style="width:120px">
                Nguyên Giá 
                <p-sortIcon field="orginalPrice"></p-sortIcon>
            </th>
            <th pResizableColumn pSortableColumn="increaseAssetDate" style="width:140px">
                Ngày ghi tăng
                <p-sortIcon field="increaseAssetDate"></p-sortIcon>
            </th>
            <th pResizableColumn pSortableColumn="numberOfDayAmortization" style="width:150px">
                Ngày khấu hao 
                <p-sortIcon field="numberOfDayAmortization"></p-sortIcon>
            </th>
            <th pResizableColumn pSortableColumn="numberOfDayUsedAsset" style="width:140px">
                Ngày sử dụng 
                <p-sortIcon field="numberOfDayUsedAsset"></p-sortIcon>
            </th>
            <th pResizableColumn pSortableColumn="numberOfDayRemaing" style="width:130px">
                Ngày còn lại
                <p-sortIcon field="numberOfDayRemaing"></p-sortIcon>
            </th>
            <th pResizableColumn pSortableColumn="amortizationValue" style="width:200px">
                Giá trị tính khấu hao
                <p-sortIcon field="amortizationValue"></p-sortIcon>
            </th>
            <th pResizableColumn pSortableColumn="depreciationOfAsset" style="width:170px">
                Khấu hao tài sản
                <p-sortIcon field="depreciationOfAsset"></p-sortIcon>
            </th>
            <th pResizableColumn pSortableColumn="residualValue" style="width:140px">
                Giá trị còn lại
                <p-sortIcon field="residualValue"></p-sortIcon>
            </th>
            <th pResizableColumn pSortableColumn="usageStatus" style="width:180px">
                Trạng thái sử dụng
                <p-sortIcon field="usageStatus"></p-sortIcon>
            </th>
            <th pResizableColumn pSortableColumn="reduceAssetDate" style="width:140px">
                Ngày ghi giảm
                <p-sortIcon field="reduceAssetDate"></p-sortIcon>
            </th>
            <th pResizableColumn pSortableColumn="reasonForReduction" style="width:140px">
                Lí do ghi giảm
                <p-sortIcon field="reasonForReduction"></p-sortIcon>
            </th>
            <th pResizableColumn pSortableColumn="recoverableValue" style="width:140px">
                Giá trị thu hồi
                <p-sortIcon field="recoverableValue"></p-sortIcon>
            </th>
            <th pResizableColumn pSortableColumn="creationTime" style="width:130px">
                Ngày tạo
                <p-sortIcon field="creationTime"></p-sortIcon>
            </th>     
            <th pResizableColumn pSortableColumn="creatorUserName" style="width:130px">
                Người tạo
                <p-sortIcon field="creatorUserName"></p-sortIcon>
            </th>     
            <th pResizableColumn pSortableColumn="lastModificationTime" style="width:130px">
                Ngày sửa
                <p-sortIcon field="lastModificationTime"></p-sortIcon>
            </th>     
            <th pResizableColumn pSortableColumn="lastModificationName" style="width:130px">
                Người sửa
                <p-sortIcon field="lastModificationName"></p-sortIcon>
            </th>     
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-asset>
        <tr>
            <td style="width:150px">
                <div class="btn-group dropdown" dropdown container="body">
                    <button dropdownToggle class="dropdown-toggle btn btn-sm btn-primary">
                        <i class="fa fa-cog"></i><span class="caret"></span>
                        Hành động
                    </button>
                    <ul class="dropdown-menu" *dropdownMenu>
                        <li (click)="createOrEditAsset(asset)">
                            <a href="javascript:;"
                                >Sửa</a>
                        </li>
                        <li (click)="deleteAsset(asset)">
                            <a href="javascript:;"
                                >Xóa</a>
                        </li>
                    </ul>
                </div>
            </td>
            <td style="width:120px">{{ asset.assetCode }}</td>
            <td style="width:120px">{{ asset.assetTypeName}}</td>
            <td style="width:120px">{{ asset.assetName}}</td>
            <td style="width:120px">{{ asset.orginalPrice }}</td>
            <td style="width:140px">{{ asset.increaseAssetDate}}</td>
            <td style="width:150px">{{ asset.numberOfDayAmortization }}</td>
            <td style="width:140px">{{ asset.numberOfDayUsedAsset}}</td>
            <td style="width:130px">{{ asset.numberOfDayRemaing }}</td>
            <td style="width:200px">{{ asset.amortizationValue}}</td>
            <td style="width:170px">{{ asset.depreciationOfAsset }}</td>
            <td style="width:140px">{{ asset.residualValue}}</td>
            <td style="width:180px">{{ asset.usageStatus }}</td>
            <td style="width:140px">{{ asset.reduceAssetDate}}</td>
            <td style="width:140px">{{ asset.reasonForReduction}}</td>
            <td style="width:140px">{{ asset.recoverableValue}}</td>
            <td style="width:130px">{{ asset.creationTime}}</td>
            <td style="width:130px">{{ asset.creatorUserName}}</td>
            <td style="width:130px">{{ asset.lastModificationTime}}</td>
            <td style="width:130px">{{ asset.lastModificationName}}</td>
          
        </tr>
    </ng-template>
    <div class="" *ngIf="totalRecords == 0">
        {{ l("NoData") }}
    </div>
    <div class="order-history__paginator" id="my-order-paging">
        <!-- <p-paginator [rows]="2" #paginator
            (onPageChange)="getAll()"
            [totalRecords]="totalRecords"
            [rowsPerPageOptions]="2"
            styleClass="history-table-paginator">
        </p-paginator> -->
        <!-- <p-paginator [rows]="2" #paginator
            (onPageChange)="getAll($event)"
            [totalRecords]="totalRecords"
            styleClass="history-table-paginator">
        </p-paginator> -->
    </div>
    <!-- <div class="card-footer table-card-footer bg-light border-top">
        <div class="row">
          <div class="col-sm-4 col-12 text-sm-left text-center">
            <button class="btn btn-secondary"
              (click)="refresh()">
              <i class="fas fa-redo-alt"></i>
            </button>
          </div>
          <div class="col-sm-4 col-12 text-center">
            <p class="mb-0 my-2">
              {{ "TotalRecordsCount" | localize: totalItems }}
            </p>
          </div>
          <div class="col-sm-4 col-12">
            <div class="float-sm-right m-auto">
              <abp-pagination-controls id="server"
                (pageChange)="getDataPage($event)">
              </abp-pagination-controls>
            </div>
          </div>
        </div>
      </div> -->
</p-table>
</div>
<!-- <app-create-or-edit-asset #createOrEditAssetModal (modalSave)="getAll()"></app-create-or-edit-asset> -->
